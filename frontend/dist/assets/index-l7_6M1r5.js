import{r as D,a as c,R as E}from"./index-DNwjLux5.js";import{a as m}from"./leaflet-src-Ba0kok9z.js";var N=D();function I(t,n){const e=c.useRef(n);c.useEffect(function(){n!==e.current&&t.attributionControl!=null&&(e.current!=null&&t.attributionControl.removeAttribution(e.current),n!=null&&t.attributionControl.addAttribution(n)),e.current=n},[t,n])}function _(t,n,e){n.center!==e.center&&t.setLatLng(n.center),n.radius!=null&&n.radius!==e.radius&&t.setRadius(n.radius)}const j=1;function k(t){return Object.freeze({__version:j,map:t})}function H(t,n){return Object.freeze({...t,...n})}const R=c.createContext(null);function C(){const t=c.use(R);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function w(t){function n(e,u){const{instance:r,context:o}=t(e).current;c.useImperativeHandle(u,()=>r);const{children:a}=e;return a==null?null:E.createElement(R,{value:o},a)}return c.forwardRef(n)}function A(t){function n(e,u){const[r,o]=c.useState(!1),{instance:a}=t(e,o).current;c.useImperativeHandle(u,()=>a),c.useEffect(function(){r&&a.update()},[a,r,e.children]);const i=a._contentNode;return i?N.createPortal(e.children,i):null}return c.forwardRef(n)}function V(t){function n(e,u){const{instance:r}=t(e).current;return c.useImperativeHandle(u,()=>r),null}return c.forwardRef(n)}function O(t,n){const e=c.useRef(void 0);c.useEffect(function(){return n!=null&&t.instance.on(n),e.current=n,function(){e.current!=null&&t.instance.off(e.current),e.current=null}},[t,n])}function v(t,n){const e=t.pane??n.pane;return e?{...t,pane:e}:t}function Z(t,n){return function(u,r){const o=C(),a=t(v(u,o),o);return I(o.map,u.attribution),O(a.current,u.eventHandlers),n(a.current,o,u,r),a}}function p(t,n,e){return Object.freeze({instance:t,context:n,container:e})}function L(t,n){return n==null?function(u,r){const o=c.useRef(void 0);return o.current||(o.current=t(u,r)),o}:function(u,r){const o=c.useRef(void 0);o.current||(o.current=t(u,r));const a=c.useRef(u),{instance:i}=o.current;return c.useEffect(function(){a.current!==u&&(n(i,u,a.current),a.current=u)},[i,u,n]),o}}function M(t,n){c.useEffect(function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){var o;(o=n.layerContainer)==null||o.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function h(t){return function(e){const u=C(),r=t(v(e,u),u);return I(u.map,e.attribution),O(r.current,e.eventHandlers),M(r.current,u),r}}function q(t,n){const e=c.useRef(void 0);c.useEffect(function(){if(n.pathOptions!==e.current){const r=n.pathOptions??{};t.instance.setStyle(r),e.current=r}},[t,n])}function B(t){return function(e){const u=C(),r=t(v(e,u),u);return O(r.current,e.eventHandlers),M(r.current,u),q(r.current,e),r}}function G(t,n){const e=L(t,n),u=h(e);return w(u)}function U(t,n){const e=L(t),u=Z(e,n);return A(u)}function X(t,n){const e=L(t,n),u=B(e);return w(u)}function F(t,n){const e=L(t,n),u=h(e);return V(u)}function J(t,n,e){const{opacity:u,zIndex:r}=n;u!=null&&u!==e.opacity&&t.setOpacity(u),r!=null&&r!==e.zIndex&&t.setZIndex(r)}function K(){return C().map}function $(t){const n=K();return c.useEffect(function(){return n.on(t),function(){n.off(t)}},[n,t]),n}const ee=X(function({center:n,children:e,...u},r){const o=new m.Circle(n,u);return p(o,H(r,{overlayContainer:o}))},_);function Q({bounds:t,boundsOptions:n,center:e,children:u,className:r,id:o,placeholder:a,style:i,whenReady:l,zoom:s,...y},P){const[x]=c.useState({className:r,id:o,style:i}),[f,z]=c.useState(null),b=c.useRef(void 0);c.useImperativeHandle(P,()=>(f==null?void 0:f.map)??null,[f]);const T=c.useCallback(g=>{if(g!==null&&!b.current){const d=new m.Map(g,y);b.current=d,e!=null&&s!=null?d.setView(e,s):t!=null&&d.fitBounds(t,n),l!=null&&d.whenReady(l),z(k(d))}},[]);c.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const S=f?E.createElement(R,{value:f},u):a??null;return E.createElement("div",{...x,ref:T},S)}const ne=c.forwardRef(Q),te=G(function({position:n,...e},u){const r=new m.Marker(n,e);return p(r,H(u,{overlayContainer:r}))},function(n,e,u){e.position!==u.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==u.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==u.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==u.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==u.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),ue=U(function(n,e){const u=new m.Popup(n,e.overlayContainer);return p(u,e)},function(n,e,{position:u},r){c.useEffect(function(){const{instance:a}=n;function i(s){s.popup===a&&(a.update(),r(!0))}function l(s){s.popup===a&&r(!1)}return e.map.on({popupopen:i,popupclose:l}),e.overlayContainer==null?(u!=null&&a.setLatLng(u),a.openOn(e.map)):e.overlayContainer.bindPopup(a),function(){var y;e.map.off({popupopen:i,popupclose:l}),(y=e.overlayContainer)==null||y.unbindPopup(),e.map.removeLayer(a)}},[n,e,r,u])}),re=F(function({url:n,...e},u){const r=new m.TileLayer(n,v(e,u));return p(r,u)},function(n,e,u){J(n,e,u);const{url:r}=e;r!=null&&r!==u.url&&n.setUrl(r)});export{ee as Circle,ne as MapContainer,te as Marker,ue as Popup,re as TileLayer,K as useMap,$ as useMapEvents};
